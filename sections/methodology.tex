% This section does not mention the possibility of applying the mechanism to clusters of different organizations
\section{Methodology}
One negative outcome of the multiple-clusters architecture is the partitioning of resources. 
To combat that, we generalize borrowing resources into resource trading between various clusters. 
\\ We first establish a communication channel between clusters, and that can be:
\\ \begin{enumerate}
    \item peer-to-peer
    \item Through a control node that facilitates the interaction (broker)
\end{enumerate}
A mechanism for sharing resources: (create a VM or container at the lender cluster that the borrower can use)
\\ And lastly, policies that dictates decision making and incentive primitives. % should we include policies here?

% INSERT ALGORITHM
\begin{algorithm}
\caption{Basic Layered Scheduling}
\begin{algorithmic}
    \For{job in WaitQueue} \Comment{sorted by X policy}
        \State $scheduled \gets ScheduleJob(job)$
        \If{$scheduled != True$}
        \State $BorrowQueue \gets BorrowQueue + job$
        \State $WaitQueue \gets WaitQueue - job$
        \EndIf
    \EndFor

    \For{job in ReadyQueue} \Comment{sorted by X policy}
        \State $scheduled \gets ScheduleJob(job)$
        \If{$scheduled != True$}
        \State $WaitQueue \gets WaitQueue + job$
        \State $ReadyQueue \gets ReadyQueue - job$
        \EndIf
    \EndFor
\end{algorithmic}
\end{algorithm}

% % Outline
% The goal is to generalize borrowing and lending resources between different clusters 
% without losing the "benefits" of the multi-cluster paradigm. % assuming we're talking about clusters in same organization
% This can be achieved by providing a mechanism for schedulers of different clusters to:

% 1- interact with each other:
% When a scheduler needs to borrow resources, it has a list of possible clusters to ask
% % Service mesh between clusters?  Registry
% % https://www.cncf.io/blog/2021/04/12/simplifying-multi-clusters-in-kubernetes/
% % https://istio.io/latest/docs/ops/deployment/deployment-models/#multiple-meshes
% % Introduce level of trust and possible mechanisms based on the level of trust:
% %   like:
% %       - clusters can know each other capacities and create a schedule to benefit both of them (far fetched)
% %       - clusters interact peer-to-peer and negotiate resources
% %       - control node controls the communication between clusters (ask control node for resource, provide control node with resource) 
% 2- share resources with each other
% Create a mechanism to allow resources to be shared between clusters.
% % create a VM/container that is "managed" by the borrower for a certain amount of time

% 3- gain something in return
% this is dependent on the policies.
% % the goal is to test different policies and see which ones, coupled with the appropriate workload, 
% % achieves one of the goals stated in the thesis statement.
% 3-1- Profit motivated. This encompass a cost function, which dictates how much a resource is "worth" for
% the cluster, or if there are free resources or jobs that can be descheduled for a gain.
% 3-2- Cooporative (favors)
% 3-3- Deals